

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SwiftBlock Addon for Blender 2.8 &mdash; SwiftBlock 0.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="swiftBlock Addon for Blender 2.8" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SwiftBlock
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">SwiftBlock Addon for Blender 2.8</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-and-start-up">Installation and Start-up</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-on-visibility">Add-on visibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#panels-and-settings">Panels and Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#block-method-settings">Block Method Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#edge-settings">Edge Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#projections">Projections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boundary-patches">Boundary Patches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#feedback-and-help">Feedback and Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-example-flow-around-sphere">Tutorial Example: Flow Around Sphere</a></li>
<li class="toctree-l2"><a class="reference internal" href="#openfoam-trade-mark-notice">OpenFOAM Trade Mark Notice</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SwiftBlock</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>SwiftBlock Addon for Blender 2.8</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/swift.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="swiftblock-addon-for-blender-2-8">
<h1>SwiftBlock Addon for Blender 2.8<a class="headerlink" href="#swiftblock-addon-for-blender-2-8" title="Permalink to this headline">¶</a></h1>
<img alt="_images/complex_block_with_elongations.png" src="_images/complex_block_with_elongations.png" />
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>SwiftBlock is a <a class="reference external" href="https://www.blender.org/">Blender</a> GUI add-on for
the OpenFOAM® <em>blockMesh</em> utility, which creates hexahedral block
structured volume meshes for OpenFOAM simulations. Block structure is
first modelled as a mesh object in Blender. A graph theory based
method implemented in the addon identifies the discrete hexahedral
blocks in the mesh object and generates blockMeshDict. Main features
include</p>
<ul class="simple">
<li>user specified divisions and optional grading of block edges</li>
<li>specification of patches (boundary surfaces)</li>
<li>specification of blocks to create cell zones/sets</li>
<li>easy block manipulations including selection, visualisation and disabling of blocks</li>
<li>visualization of edge directions</li>
<li>projection of block edges to surfaces on another object to
create curved shapes</li>
</ul>
<p>Application examples include creation of block meshes for</p>
<ul class="simple">
<li>orthogonal base mesh with elongated or stretched cells for
SnappyHexMesh</li>
<li>controlled grading of hexahedral meshes inside or outside
rectangular, cylindrical or spherical shapes.</li>
</ul>
<p>This documentation describes the version of the add-on available under
<a class="reference external" href="https://github.com/tkeskita/swiftBlock">github/tkeskita</a>.
The add-on has been tested with
<a class="reference external" href="https://www.blender.org/download/">Blender 2.80</a> and
<a class="reference external" href="https://openfoam.org">OpenFOAM.org</a> version 7.
Previous versions of the add-on are available in
<a class="reference external" href="https://github.com/nogenmyr/swiftBlock">github/nogenmyr</a> and
<a class="reference external" href="https://github.com/Flowkersma/swiftBlock">github/Flowkersma</a>,
and the documentation for original version is available at
<a class="reference external" href="http://openfoamwiki.net/index.php/SwiftBlock">OpenFOAM wiki</a>.</p>
</div>
<div class="section" id="installation-and-start-up">
<h2>Installation and Start-up<a class="headerlink" href="#installation-and-start-up" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You need to use Blender 2.80. You can
<a class="reference external" href="https://www.blender.org/download/">download Blender 2.80 here</a>.</li>
<li>Add-on code is available at <a class="reference external" href="https://github.com/tkeskita/swiftBlock">https://github.com/tkeskita/swiftBlock</a>.
To download add-on from Github, Select “Clone or download”, then
“Download ZIP”.</li>
<li>Start Blender, go to “Edit” –&gt; “Preferences” –&gt; “Add-ons” –&gt; “Install”
–&gt; open the add-on zip file.</li>
<li>Activate the “SwiftBlock” add-on in Preferences.
Add-on is located in OpenFOAM category, Testing level of Blender add-ons.</li>
<li>Click “Save Preferences” to autoload add-on every time Blender is started</li>
</ul>
</div>
<div class="section" id="add-on-visibility">
<h2>Add-on visibility<a class="headerlink" href="#add-on-visibility" title="Permalink to this headline">¶</a></h2>
<p>Add-on is visible in Blender’s 3D Viewport in Sidebar as a separate
tab in Edit Mode. To view the add-on panels, you must</p>
<blockquote>
<div><ul class="simple">
<li>Select a mesh object (in 3D Viewport or in Outliner)</li>
<li>View Sidebar (“View” –&gt; “Toggle Sidebar” or press “N” key in 3D Viewport)</li>
<li>Select “SwiftBlock” tab in the Sidebar</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Install add-on as specified above</li>
<li>In Blender, select the default Cube object in 3D Viewport or in Outliner</li>
<li>Make add-on panels visible as described above</li>
<li>Click <em>Initialize Object</em></li>
<li>Model block geometry in Blender</li>
<li>Set Edge Parameters for each edge</li>
<li>Optionally add projections and/or Boundary Patches</li>
<li>Optionally preview blocks</li>
<li>Press <em>Export</em> to save blockMeshDict to a case folder</li>
<li>Run blockMesh OpenFOAM command in terminal to generate mesh</li>
</ul>
</div>
<div class="section" id="panels-and-settings">
<h2>Panels and Settings<a class="headerlink" href="#panels-and-settings" title="Permalink to this headline">¶</a></h2>
<p>SwiftBlock GUI consists of four panels: Block Method Settings, Edge
Settings, Projections and Boundary Patches.</p>
<img alt="_images/ui.png" src="_images/ui.png" />
<div class="section" id="block-method-settings">
<h3>Block Method Settings<a class="headerlink" href="#block-method-settings" title="Permalink to this headline">¶</a></h3>
<p>This panel contains overall settings and tool buttons.
You can hover mouse cursor over fields to see tool tips for more
information.</p>
<img alt="_images/block_method_settings.png" src="_images/block_method_settings.png" />
<ul class="simple">
<li><em>Initialize Object</em> tool appears when a mesh object is selected
Running the tool will intialize the selected object for SwiftBlock,
enables Edit Mode, and reveals the rest of the GUI.
<strong>Note</strong>: SwiftBlock tools are available only in Edit Mode.</li>
<li><em>Method</em> defines the block generation method. Default value is
<em>BlockMeshMG</em>, which supports multi grading.
<strong>Note:</strong> Currently no other methods are available. The source
code also includes the original <em>blockMeshBodyFit</em> method, but is has
not been upgraded/tested with Blender 2.80, so it is currently disabled.</li>
<li><em>Build</em> tool identifies the blocks from the current mesh.
Blocks are listed in the panel window after building is completed.
<strong>Warning</strong>: Bulding may take a long time for complex block systems.</li>
<li><em>Use Numba</em> option box enables Python Numba performance library.
Numba compiles the Build tool into machine code, which decreases the
time required for <em>Build</em>.
<strong>Note</strong>: Numba requires installation of the Numba Python libraries.</li>
<li><em>Preview</em> tool shows preview of the edges on the result block mesh.
Preview requires that the OpenFOAM blockMesh utility is available in
Blender. An error message is displayed if blockMesh command is not
found. To make blockMesh available, you must start terminal command
prompt, source OpenFOAM in the terminal, and start blender from the
same terminal. Preview will automatically run <em>Build</em> tool if needed.</li>
<li><em>Export</em> tool saves blockMeshDict file into a case folder. The user
is prompted to select the case folder.</li>
<li><em>Block list</em> contains the list of blocks identified by the <em>Build</em> tool.<ul>
<li>Clicking a block selects and highlights the block in the 3D
Viewport. Enable e.g. “Show whole scene transparent” option in
the 3D Viewport header to see blocks inside.</li>
<li>Check box can be deselected to disable a block</li>
</ul>
</li>
<li><em>Get Block from Selection</em> selects the block attached to the current
selection.</li>
</ul>
</div>
<div class="section" id="edge-settings">
<h3>Edge Settings<a class="headerlink" href="#edge-settings" title="Permalink to this headline">¶</a></h3>
<p>This panel is used to set parameter values and apply them on selected edges.</p>
<img alt="_images/edge_settings.png" src="_images/edge_settings.png" />
<ul class="simple">
<li><em>Cells</em> specifies the number of divisions.</li>
<li><em>Start</em> and <em>End</em> refer to optional edge grading at the start and
end of edges.<ul>
<li><em>x1</em> is the first cell length at the start of edge.</li>
<li><em>x2</em> is the last cell length at the end of edge.</li>
<li><em>r1</em> is the geometric boundary layer ratio of neighbor cell
lengths at the start of edge. Values larger than 1.0 create grading.</li>
<li><em>r2</em> is the geometric boundary layer ratio of neighbor cell
lengths at the end of edge.</li>
</ul>
</li>
<li><em>Set Params</em> tool applies the above parameter values to currently
selected edges.</li>
<li><em>Get Params</em> tool gets the parameter values from active edge.</li>
<li><em>Select Group</em> tool adds edges in same edge group to selection. This
is a convenience tool to select aligned or connected edges, to ease
specification of consistent parameter values.</li>
<li><em>Flip Dir</em> tool flips the edge direction of selected edges.</li>
<li><em>Show Edge Directions</em> tool visualizes the edge directions by adding
cones to edge centers.</li>
</ul>
</div>
<div class="section" id="projections">
<h3>Projections<a class="headerlink" href="#projections" title="Permalink to this headline">¶</a></h3>
<p>This panel contains settings for projecting edges to surfaces on other
mesh objects.</p>
<img alt="_images/projections.png" src="_images/projections.png" />
<ul class="simple">
<li><em>Icon</em> drop down menu specifies the projection object</li>
<li><em>Add</em> button will add the specified object as projection object and
populates list of projected vertices, edges and faces.</li>
<li><em>Remove</em> button will remove all projections</li>
<li><em>Projection list</em> contains the projected vertices, edges and faces.<ul>
<li>Clicking on a list row will highlight the item in 3D Viewport.
Click <em>Return to SwiftBlock</em> button to return to GUI panel.</li>
<li>Click on the cross icon to remove a projection.</li>
</ul>
</li>
<li><em>Automatic Edge Projection</em> select box will enable automatic
snapping of edges to geometry.</li>
<li><em>Show Internal Faces</em> will highlight internal faces.</li>
</ul>
</div>
<div class="section" id="boundary-patches">
<h3>Boundary Patches<a class="headerlink" href="#boundary-patches" title="Permalink to this headline">¶</a></h3>
<p>Boundary Patches panel is used to specify boundary faces and their
types utilizing Blender material system. Patches are shown as a
list. Initially all faces are added to <em>default</em> boundary patch.</p>
<p><strong>Note</strong>: Blender may add a default “Material” material. You can
remove it from the patch list unless you intend to use it.</p>
<img alt="_images/boundary_patches.png" src="_images/boundary_patches.png" />
<ul class="simple">
<li>Clicking on list item will select and highlight the faces belonging
to a boundary</li>
<li>Double-clicking on item will edit the boundary name</li>
<li>Clicking on the right column will open a drop-down menu, which
allows to change the boundary patch type.</li>
<li>New boundaries are created by selecting one or more faces and then
click on the plus icon.</li>
<li>Selected boundary is deleted by clicking on minus icon.</li>
<li><em>Assign</em> button will assign selected faces to a selected boundary patch</li>
</ul>
</div>
</div>
<div class="section" id="feedback-and-help">
<h2>Feedback and Help<a class="headerlink" href="#feedback-and-help" title="Permalink to this headline">¶</a></h2>
<p>File bug report in
<a class="reference external" href="https://github.com/tkeskita/swiftBlock/issues">github</a>
or discuss the add-on on the
<a class="reference external" href="https://www.cfd-online.com/Forums/openfoam-community-contributions/100604-swiftsnap-swiftblock-guis-openfoams-meshers.html">SwiftBlock thread on cfd-online</a></p>
</div>
<div class="section" id="tutorial-example-flow-around-sphere">
<h2>Tutorial Example: Flow Around Sphere<a class="headerlink" href="#tutorial-example-flow-around-sphere" title="Permalink to this headline">¶</a></h2>
<p>This example shows steps to create a block mesh around a sphere. This
tutorial was originally presented for the previous Blender version on
<a class="reference external" href="https://www.youtube.com/watch?v=V4Omjmm40GQ">Youtube</a>.
The final Blender file is included in the
add-on source at <em>example/flow_around_sphere.blend</em>. <strong>Note</strong>: This
tutorial assumes that the user is familiar with mesh modelling
in Blender.</p>
<img alt="_images/flow_around_sphere.png" src="_images/flow_around_sphere.png" />
<ul class="simple">
<li>Select the default Cube object and click on <em>Initialize Object</em> in
SwiftBlock panel</li>
<li>Select all vertices, run Swift Block operator <em>Extrude Blocks</em> from
the operator search menu by pressing F3 in the 3D Viewport, type
name of operator, click operator name in the list, and finally
right-click to cancel moving. <em>Extrude Blocks</em> creates face
extrusion retaining internal faces.</li>
<li>Scale exruded vertices by factor 3 using selection center or origin
as pivot point. This positions 6 blocks around center cube block.</li>
<li>Extrude the face in positive X direction by 12 m to create a
block towards outlet.</li>
<li>Extrude the face in negative X direction by 6 m to create another
block towards the inlet.</li>
<li>Click on <em>Build</em>, which creates 9 blocks</li>
<li>Click on <em>block 0</em> in the block list to select and highlight the
original cube block in the center, then disable that block by
clicking on the check box next to block name, so that the inside of
that block will not be meshed</li>
<li>Go to Object Mode and add UV Sphere to origin</li>
<li>Go back to Object Mode, select Cube object and go to Edit Mode to
view SwiftBlock panels</li>
<li>Click on <em>block 0</em> in block list to select center block faces.</li>
<li>In Projections panel, the Sphere is automatically selected as the
projection object. Click <em>Add</em> to add projections to Sphere. Check
that the projection list includes the 6 center faces by clicking on
the face items at the end of the list to highlight them.</li>
<li>In order to preview mesh near sphere, you must disable one of the
four outer central blocks. To do that, select one of the outer faces
in the center piece, and click <em>Get Block from Selection</em> to
identify the block. Then uncheck the box next to the block in the
block list.</li>
<li>Click on <em>Preview</em> to preview the default mesh, then return to SwiftBlock.</li>
<li>To add grading towards the sphere, first select one of the diagonal edges
inside, then click on <em>Select Group</em>, which will select all diagonal edges.</li>
<li>Enter values to edge parameters: Cells: 20, x1: 0.01, r1: 1.2</li>
<li>Then click on <em>Set Params</em> to assign those values to selected edges.</li>
<li>Click on <em>Preview</em> to preview the graded mesh, then return to SwiftBlock.</li>
<li>Enable the block that was disabled 6 steps ago.</li>
<li>Name Boundary Patches by selecting face(s) for each patch and click
on plus icon, then rename patch and change patch type:<ul>
<li>inlet: face on negative X end, patch type: patch</li>
<li>outlet: face on positive X end, patch type: patch</li>
<li>wall_outer: other 12 outer faces, patch type: wall</li>
</ul>
</li>
<li>Finally rename default patch (which should now contain 6 internal
faces) to wall_sphere.</li>
<li>Save Blender file, then click on <em>Export</em> to export blockMeshDict
into an OpenFOAM case folder</li>
<li>Run OpenFOAM command <em>blockMesh</em> in case folder to create block
volume mesh and inspect the result with e.g.
<a class="reference external" href="https://www.paraview.org">Paraview</a></li>
</ul>
</div>
<div class="section" id="openfoam-trade-mark-notice">
<h2>OpenFOAM Trade Mark Notice<a class="headerlink" href="#openfoam-trade-mark-notice" title="Permalink to this headline">¶</a></h2>
<p>This offering is not approved or endorsed by OpenCFD Limited, producer
and distributor of the OpenFOAM software via www.openfoam.com, and
owner of the OPENFOAM® and OpenCFD® trade marks.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="swiftBlock Addon for Blender 2.8" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Karl-Johan Nogenmyr, Mikko Folkersma, Turo Valikangas, Tuomo Keskitalo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>